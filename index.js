(function(a,b){if('function'==typeof define&&define.amd)define('Storage',['exports'],b);else if('undefined'!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.Storage=c.exports}})(this,function(a){'use strict';function b(g,h){if(!(g instanceof h))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(a,'__esModule',{value:!0}),a.default=function(){return new f(e)};var c=function(){function g(h,j){for(var l,k=0;k<j.length;k++)l=j[k],l.enumerable=l.enumerable||!1,l.configurable=!0,'value'in l&&(l.writable=!0),Object.defineProperty(h,l.key,l)}return function(h,j,k){return j&&g(h.prototype,j),k&&g(h,k),h}}(),d=function(){function g(){b(this,g)}return c(g,[{key:'isActive',value:function(){return!!window.localStorage}},{key:'setData',value:function(j,k){return new Promise(function(l){window.localStorage.setItem(j,JSON.stringify(k)),l('data '+j+' saved')})}},{key:'getData',value:function(j){return new Promise(function(k,l){var m=window.localStorage.getItem(j);m?k(JSON.parse(m)):l('data '+j+' not found')})}},{key:'getAll',value:function(j){var k=this;return new Promise(function(l,m){if(j&&j.length){var n=[];j.map(function(o){k.getData(o).then(function(p){n.push(p)},function(){n.push(null)})}),n.length===j.length&&l(n)}else m('[Storage] Cannot fetch data with '+(j?'empty':'not valid')+' keys array')})}},{key:'getPartByKey',value:function(j,k){var l=this;return new Promise(function(m,n){l.getData(j).then(function(o){o[k]?m(o):n('[Storage] Cannot fetch data. Have no '+k+' in '+j)})})}}]),g}(),e=[d],f=function(){function g(h){b(this,g),this._storages=[],this._activeStorage={},this._storages=h||null,this.activeStorage=h.filter(function(j){return j.isActive()})[0]||null}return c(g,[{key:'activeStorage',set:function(j){this._activeStorage=j},get:function(){return this._activeStorage||new Error('[Storage] We have no active storage')}}]),c(g,[{key:'isStorageActive',value:function(j){return this._storages&&this._storages[j]?this._storages[j].isActive():new Error('[Storage] We don`t work with '+j+' for now.')}},{key:'setActiveStorage',value:function(j){return this._storages&&this._storages[j]?void(this.activeStorage=this._storages[j]):new Error('[Storage] We dont work with storage '+j+' yet.\n                            '+(this.activeStorage?'Your Current Active Storage is ${this._activeStorage}':''))}},{key:'setData',value:function(j,k){return j&&k?this.activeStorage.setData(j,k):new Error('[Storage] Cannot set data. \n                                You sent no  '+(j?'data':'name'))}},{key:'getData',value:function(j){return j?this.activeStorage.getData(j):new Error('[Storage] Cannot fetch data. You have sent no name')}},{key:'getAll',value:function(j){return j?this.activeStorage.getAll(j):new Error('[Storage] Cannot fetch data. You have sent no array with names')}},{key:'getPartByKey',value:function(j,k){return j&&k?this.activeStorage.getPartByKey(j,k):new Error('[Storage] Cannot fetch data. \n                                You sent no  '+(j?'key':'name'))}},{key:'search',value:function(j,k,l){return j&&k&&l?this.activeStorage.search(j,k,l):new Error('[Storage] Cannot fetch data. \n                                You sent no  '+(j?k?'searchText':'key':'name'))}}]),g}()});
