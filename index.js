(function(a,b){if('function'==typeof define&&define.amd)define('Storage',['exports'],b);else if('undefined'!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.Storage=c.exports}})(this,function(a){'use strict';function b(h,j){if(!(h instanceof j))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(a,'__esModule',{value:!0}),a.default=function(){return new g(f)};var c=function(){function h(j,k){for(var m,l=0;l<k.length;l++)m=k[l],m.enumerable=m.enumerable||!1,m.configurable=!0,'value'in m&&(m.writable=!0),Object.defineProperty(j,m.key,m)}return function(j,k,l){return k&&h(j.prototype,k),l&&h(j,l),j}}(),d=function(){function h(){b(this,h)}return c(h,[{key:'isActive',value:function(){return!!window.localStorage}},{key:'setData',value:function(k,l){return new Promise(function(m){window.localStorage.setItem(k,JSON.stringify(l)),m('data '+k+' saved')})}},{key:'getData',value:function(k){return new Promise(function(l,m){var n=window.localStorage.getItem(k);n?l(JSON.parse(n)):m('data '+k+' not found')})}},{key:'getAll',value:function(k){var l=this;return new Promise(function(m,n){if(k&&k.length){var o=[];k.map(function(p){l.getData(p).then(function(q){o.push(q)},function(){o.push(null)})}),o.length===k.length&&m(o)}else n('[Storage] Cannot fetch data with '+(k?'empty':'not valid')+' keys array')})}},{key:'getPartByKey',value:function(k,l){var m=this;return new Promise(function(n,o){m.getData(k).then(function(p){p[l]?n(p):o('[Storage] Cannot fetch data. Have no '+l+' in '+k)})})}}]),h}(),e=function(){function h(){b(this,h)}return c(h,[{key:'isActive',value:function(){return!!window.sessionStorage}},{key:'setData',value:function(k,l){return new Promise(function(m){window.sessionStorage.setItem(k,JSON.stringify(l)),m('data '+k+' saved')})}},{key:'getData',value:function(k){return new Promise(function(l,m){var n=window.sessionStorage.getItem(k);n?l(JSON.parse(n)):m('data '+k+' not found')})}},{key:'getAll',value:function(k){var l=this;return new Promise(function(m,n){if(k&&k.length){var o=[];k.map(function(p){l.getData(p).then(function(q){o.push(q)},function(){o.push(null)})}),o.length===k.length&&m(o)}else n('[Storage] Cannot fetch data with '+(k?'empty':'not valid')+' keys array')})}},{key:'getPartByKey',value:function(k,l){var m=this;return new Promise(function(n,o){m.getData(k).then(function(p){p[l]?n(p):o('[Storage] Cannot fetch data. Have no '+l+' in '+k)})})}}]),h}(),f=[d,e],g=function(){function h(j){b(this,h),this._storages=[],this._activeStorage={},this._storages=j||null,this.activeStorage=j.filter(function(k){return k.isActive()})[0]||null}return c(h,[{key:'activeStorage',set:function(k){this._activeStorage=k},get:function(){return this._activeStorage||new Error('[Storage] We have no active storage')}}]),c(h,[{key:'isStorageActive',value:function(k){return this._storages&&this._storages[k]?this._storages[k].isActive():new Error('[Storage] We don`t work with '+k+' for now.')}},{key:'setActiveStorage',value:function(k){return this._storages&&this._storages[k]?void(this.activeStorage=this._storages[k]):new Error('[Storage] We dont work with storage '+k+' yet.\n                            '+(this.activeStorage?'Your Current Active Storage is ${this._activeStorage}':''))}},{key:'setData',value:function(k,l){return k&&l?this.activeStorage.setData(k,l):new Error('[Storage] Cannot set data. \n                                You sent no  '+(k?'data':'name'))}},{key:'getData',value:function(k){return k?this.activeStorage.getData(k):new Error('[Storage] Cannot fetch data. You have sent no name')}},{key:'getAll',value:function(k){return k?this.activeStorage.getAll(k):new Error('[Storage] Cannot fetch data. You have sent no array with names')}},{key:'getPartByKey',value:function(k,l){return k&&l?this.activeStorage.getPartByKey(k,l):new Error('[Storage] Cannot fetch data. \n                                You sent no  '+(k?'key':'name'))}},{key:'search',value:function(k,l,m){return k&&l&&m?this.activeStorage.search(k,l,m):new Error('[Storage] Cannot fetch data. \n                                You sent no  '+(k?l?'searchText':'key':'name'))}}]),h}()});
